import{u as B,i as A}from"./action-cd384d03.js";import{d as E,y as I,I as N,z as _,r as a,k as g,v as s,w as i,f as p,s as O,j as o,n as y,l as h,m as v,c as q,X as D,S as j,aj as L,G as R}from"./tool-4bde39df.js";import"./modulepreload-polyfill-3cfb730f.js";const U={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}},b={style:{display:"grid","grid-template-columns":"1fr 80px","column-gap":"5px"}},G={key:0,style:{"text-align":"center"}},J=E({__name:"Ip",async setup(T){let r,c;const k=/((^\s*((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))\s*$)|(^\s*((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$))/ig,e=B(([r,c]=I(()=>A({input:"",option:D("json"),result:""},{paste:t=>k.test(t)||t==="localhost"})),r=await r,c(),r));let d=N(!1);const u=_(()=>e.current.result===""?j.empty():j.formObject(e.current.result)),f=_(()=>!u.value.isEmpty()||u.value.isError()),x=()=>{e.current.input="localhost",m()},m=()=>{d.value=!0,L({url:"https://get.geojs.io/v1/ip/geo.json",params:e.current.input!=="localhost"?{ip:e.current.input}:{}}).then(({data:t})=>{e.current.result=R.isArray(t)&&t.length<2?t[0]:t,e.save()}).catch(t=>{e.current.result={error:$error(t,!1)},e.save()}).then(()=>{d.value=!1})};return(t,n)=>{const V=a("Input"),z=a("Display"),S=a("Button"),$=a("Link"),C=a("SerializeOutput"),w=a("Align");return p(),g("div",U,[s(w,{width:600,direction:"vertical"},{default:i(()=>[O("div",b,[s(z,{type:"general",text:o(e).current.input===""?t.$t("ip_local"):"",onClick:x,position:"right-center"},{default:i(()=>[s(V,{modelValue:o(e).current.input,"onUpdate:modelValue":n[0]||(n[0]=l=>o(e).current.input=l),size:"large",placeholder:t.$t("ip_input")},null,8,["modelValue","placeholder"])]),_:1},8,["text"]),s(S,{type:"primary",loading:o(d),size:"large",onClick:m},{default:i(()=>[y(h(t.$t("ip_query")),1)]),_:1},8,["loading"])]),f.value?v("",!0):(p(),g("div",G,[s($,{href:"https://geojs.io/"},{default:i(()=>[y(h(t.$t("ip_info_source"))+": https://geojs.io/",1)]),_:1})])),f.value?(p(),q(C,{key:1,allow:["json","xml","yaml","toml","php_array","properties","http_query_string"],content:u.value,height:300,modelValue:o(e).current.option,"onUpdate:modelValue":n[1]||(n[1]=l=>o(e).current.option=l),onSuccess:n[2]||(n[2]=l=>o(e).save())},null,8,["content","modelValue"])):v("",!0)]),_:1})])}}});export{J as default};
