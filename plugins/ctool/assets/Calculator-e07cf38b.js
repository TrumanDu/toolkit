import{u as Q,i as j}from"./action-cd384d03.js";import{L as q,K as H,d as A,ae as m,y as E,z as W,D as I,r as V,c as S,w as h,f as F,v as o,j as u,s as g,n as G,l as C}from"./tool-4bde39df.js";import"./modulepreload-polyfill-3cfb730f.js";var U={exports:{}};(function(Y,x){(function(d,l){Y.exports=l()})(H,function(){var d="month",l="quarter";return function(e,f){var p=f.prototype;p.quarter=function(r){return this.$utils().u(r)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(r-1))};var y=p.add;p.add=function(r,t){return r=Number(r),this.$utils().p(t)===l?this.add(3*r,d):y.bind(this)(r,t)};var $=p.startOf;p.startOf=function(r,t){var n=this.$utils(),i=!!n.u(t)||t;if(n.p(r)===l){var s=this.quarter()-1;return i?this.month(3*s).startOf(d).startOf("day"):this.month(3*s+2).endOf(d).endOf("day")}return $.bind(this)(r,t)}}})})(U);var K=U.exports;const L=q(K);var N={exports:{}};(function(Y,x){(function(d,l){Y.exports=l()})(H,function(){return function(d,l,e){l.prototype.dayOfYear=function(f){var p=Math.round((e(this).startOf("day")-e(this).startOf("year"))/864e5)+1;return f==null?p:this.add(f-p,"day")}}})})(N);var R=N.exports;const T=q(R);var B={exports:{}};(function(Y,x){(function(d,l){Y.exports=l()})(H,function(){var d="day";return function(l,e,f){var p=function(r){return r.add(4-r.isoWeekday(),d)},y=e.prototype;y.isoWeekYear=function(){return p(this).year()},y.isoWeek=function(r){if(!this.$utils().u(r))return this.add(7*(r-this.isoWeek()),d);var t,n,i,s,O=p(this),v=(t=this.isoWeekYear(),n=this.$u,i=(n?f.utc:f)().year(t).startOf("year"),s=4-i.isoWeekday(),i.isoWeekday()>4&&(s+=7),i.add(s,d));return O.diff(v,"week")+1},y.isoWeekday=function(r){return this.$utils().u(r)?this.day()||7:this.day(this.day()%7?r:r-7)};var $=y.startOf;y.startOf=function(r,t){var n=this.$utils(),i=!!n.u(t)||t;return n.p(r)==="isoweek"?i?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):$.bind(this)(r,t)}}})})(B);var J=B.exports;const P=q(J),X=g("span",null,"与",-1),Z=g("span",null,"相差",-1),rt=A({__name:"Calculator",async setup(Y){let x,d;m.extend(L),m.extend(T),m.extend(P);const l=m(),e=Q(([x,d]=E(()=>j({poor:{input1:l.format("YYYY-MM-DD HH:mm:ss"),input2:l.add(1,"d").format("YYYY-MM-DD HH:mm:ss"),unit:"seconds"},operation:{input:l.format("YYYY-MM-DD HH:mm:ss"),unit:"days",type:"+",length:1},analyze:{type:"year",input:l.format("YYYY-MM-DD HH:mm:ss")}})),x=await x,d(),x)),f=[{value:"years",label:$t("time_year"),rate:0},{value:"months",label:$t("time_month"),rate:0},{value:"weeks",label:$t("time_week"),rate:1e3*60*60*24*7},{value:"days",label:$t("time_day"),rate:1e3*60*60*24},{value:"hours",label:$t("time_hour"),rate:1e3*60*60},{value:"minutes",label:$t("time_minute"),rate:1e3*60},{value:"seconds",label:$t("time_second"),rate:1e3}],p=t=>{for(let n of f)if(n.value===t)return n.rate;return 0},y=W(()=>m(e.current.poor.input2).diff(m(e.current.poor.input1),e.current.poor.unit)),$=W(()=>{if(!e.current.operation.length)return"";let t=p(e.current.operation.unit);if(t===0){const n=e.current.operation.type==="+"?"add":"subtract";return m(e.current.operation.input)[n](e.current.operation.length,e.current.operation.unit).format("YYYY-MM-DD HH:mm:ss")}return m(m(e.current.operation.input).unix()*1e3+t*e.current.operation.length*(e.current.operation.type==="+"?1:-1)).format("YYYY-MM-DD HH:mm:ss")}),r=W(()=>{let t=m(e.current.analyze.input);const n=t.year(),i=t.quarter();if(e.current.analyze.type==="quarter"){const c=m(`${t.year()}-${(i-1)*3+1}-01`),_=Math.ceil((t.unix()-c.unix())/(86400*7)),b=Math.ceil((t.unix()-c.unix())/86400),w=Math.ceil((t.unix()-c.unix())/3600),z=Math.ceil((t.unix()-c.unix())/60),D=t.unix()-c.unix();return $t("time_analyze_quarter_output",{quarter:i,weekOfQuarter:_,dayOfQuarter:b,hourOfQuarter:w,minuteOfQuarter:z,secondOfQuarter:D})}if(e.current.analyze.type==="month"){const c=t.month()+1,_=m(`${t.year()}-${c}-01`),b=Math.ceil((t.unix()-_.unix())/(86400*7)),w=Math.ceil((t.unix()-_.unix())/3600),z=Math.ceil((t.unix()-_.unix())/60),D=t.unix()-_.unix();return $t("time_analyze_month_output",{month:c,weekOfMonth:b,hourOfMonth:w,minuteOfMonth:z,secondOfMonth:D})}const s=m(t.year()+"-01-01"),O=t.isoWeek(),v=t.dayOfYear(),M=Math.ceil((t.unix()-s.unix())/3600),k=Math.ceil((t.unix()-s.unix())/60),a=t.unix()-s.unix();return $t("time_analyze_year_output",{year:n,quarter:i,weekOfYear:O,dayOfYear:v,hourOfYear:M,minuteOfYear:k,secondOfYear:a})});return I(()=>e.current,()=>{e.save()},{immediate:!0,deep:!0}),(t,n)=>{const i=V("Input"),s=V("Select"),O=V("InputNumber"),v=V("Align"),M=V("Card"),k=V("Button");return F(),S(v,{direction:"vertical"},{default:h(()=>[o(M,{title:t.$t("time_diff_tool")},{default:h(()=>[o(v,null,{default:h(()=>[o(i,{center:"",modelValue:u(e).current.poor.input1,"onUpdate:modelValue":n[0]||(n[0]=a=>u(e).current.poor.input1=a),width:170},null,8,["modelValue"]),X,o(i,{center:"",modelValue:u(e).current.poor.input2,"onUpdate:modelValue":n[1]||(n[1]=a=>u(e).current.poor.input2=a),width:170},null,8,["modelValue"]),Z,o(O,{center:"","model-value":y.value,width:160},{append:h(()=>[o(s,{modelValue:u(e).current.poor.unit,"onUpdate:modelValue":n[2]||(n[2]=a=>u(e).current.poor.unit=a),options:f.map(({value:a,label:c})=>({value:a,label:c}))},null,8,["modelValue","options"])]),_:1},8,["model-value"])]),_:1})]),_:1},8,["title"]),o(M,{title:t.$t("time_operation")},{default:h(()=>[o(v,null,{default:h(()=>[o(i,{center:"",modelValue:u(e).current.operation.input,"onUpdate:modelValue":n[3]||(n[3]=a=>u(e).current.operation.input=a),width:170},null,8,["modelValue"]),o(s,{modelValue:u(e).current.operation.type,"onUpdate:modelValue":n[4]||(n[4]=a=>u(e).current.operation.type=a),options:[{value:"+",label:t.$t("time_add")},{value:"-",label:t.$t("time_reduce")}]},null,8,["modelValue","options"]),o(O,{center:"",modelValue:u(e).current.operation.length,"onUpdate:modelValue":n[6]||(n[6]=a=>u(e).current.operation.length=a),width:160},{append:h(()=>[o(s,{modelValue:u(e).current.operation.unit,"onUpdate:modelValue":n[5]||(n[5]=a=>u(e).current.operation.unit=a),options:f.map(({value:a,label:c})=>({value:a,label:c}))},null,8,["modelValue","options"])]),_:1},8,["modelValue"]),g("span",null,[G(C(t.$t("time_after"))+", "+C(t.$t("time_is"))+" ",1),o(k,{onClick:n[7]||(n[7]=a=>t.$copy($.value)),type:"dotted",text:$.value},null,8,["text"])])]),_:1})]),_:1},8,["title"]),o(M,{title:t.$t("time_analyze")},{default:h(()=>[o(v,null,{default:h(()=>[o(i,{center:"",modelValue:u(e).current.analyze.input,"onUpdate:modelValue":n[8]||(n[8]=a=>u(e).current.analyze.input=a),width:170},null,8,["modelValue"]),o(s,{modelValue:u(e).current.analyze.type,"onUpdate:modelValue":n[9]||(n[9]=a=>u(e).current.analyze.type=a),options:[{value:"year",label:t.$t("time_analyze_year")},{value:"quarter",label:t.$t("time_analyze_quarter")},{value:"month",label:t.$t("time_analyze_month")}]},null,8,["modelValue","options"]),o(k,{onClick:n[10]||(n[10]=a=>t.$copy(r.value)),type:"dotted",text:r.value},null,8,["text"])]),_:1})]),_:1},8,["title"])]),_:1})}}});export{rt as default};
