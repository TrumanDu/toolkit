var J=Object.defineProperty;var Q=(k,s,p)=>s in k?J(k,s,{enumerable:!0,configurable:!0,writable:!0,value:p}):k[s]=p;var L=(k,s,p)=>(Q(k,typeof s!="symbol"?s+"":s,p),p);import{u as W,i as Y}from"./action-cd384d03.js";import{K as Z,d as R,y as tt,I,z as et,D as lt,r as b,k as it,v as i,w as f,j as o,c as j,m as M,V as $,F as nt,f as S,n as x,l as P,s as y,X as at,S as ot}from"./tool-4bde39df.js";import{r as st}from"./radix-450ef310.js";import{I as r}from"./Item-09bd741e.js";import"./modulepreload-polyfill-3cfb730f.js";var A,z,U;(function(){var k,s,p,d,m,h,v,_;_=function(l){var e,u,a,t;return e=(l&255<<24)>>>24,u=(l&255<<16)>>>16,a=(l&65280)>>>8,t=l&255,[e,u,a,t].join(".")},v=function(l){var e,u,a,t,n,g;for(e=[],a=t=0;t<=3&&l.length!==0;a=++t){if(a>0){if(l[0]!==".")throw new Error("Invalid IP");l=l.substring(1)}g=s(l),n=g[0],u=g[1],l=l.substring(u),e.push(n)}if(l.length!==0)throw new Error("Invalid IP");switch(e.length){case 1:if(e[0]>4294967295)throw new Error("Invalid IP");return e[0]>>>0;case 2:if(e[0]>255||e[1]>16777215)throw new Error("Invalid IP");return(e[0]<<24|e[1])>>>0;case 3:if(e[0]>255||e[1]>255||e[2]>65535)throw new Error("Invalid IP");return(e[0]<<24|e[1]<<16|e[2])>>>0;case 4:if(e[0]>255||e[1]>255||e[2]>255||e[3]>255)throw new Error("Invalid IP");return(e[0]<<24|e[1]<<16|e[2]<<8|e[3])>>>0;default:throw new Error("Invalid IP")}},p=function(l){return l.charCodeAt(0)},d=p("0"),h=p("a"),m=p("A"),s=function(l){var e,u,a,t,n;for(t=0,e=10,u="9",a=0,l.length>1&&l[a]==="0"&&(l[a+1]==="x"||l[a+1]==="X"?(a+=2,e=16):"0"<=l[a+1]&&l[a+1]<="9"&&(a++,e=8,u="7")),n=a;a<l.length;){if("0"<=l[a]&&l[a]<=u)t=t*e+(p(l[a])-d)>>>0;else if(e===16)if("a"<=l[a]&&l[a]<="f")t=t*e+(10+p(l[a])-h)>>>0;else if("A"<=l[a]&&l[a]<="F")t=t*e+(10+p(l[a])-m)>>>0;else break;else break;if(t>4294967295)throw new Error("too large");a++}if(a===n)throw new Error("empty octet");return[t,a]},k=function(){function l(e,u){var a,t,n;if(typeof e!="string")throw new Error("Missing `net' parameter");if(u||(n=e.split("/",2),e=n[0],u=n[1]),u||(u=32),typeof u=="string"&&u.indexOf(".")>-1){try{this.maskLong=v(u)}catch{throw new Error("Invalid mask: "+u)}for(a=t=32;t>=0;a=--t)if(this.maskLong===4294967295<<32-a>>>0){this.bitmask=a;break}}else if(u||u===0)this.bitmask=parseInt(u,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0);else throw new Error("Invalid mask: empty");try{this.netLong=(v(e)&this.maskLong)>>>0}catch{throw new Error("Invalid net address: "+e)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+u);this.size=Math.pow(2,32-this.bitmask),this.base=_(this.netLong),this.mask=_(this.maskLong),this.hostmask=_(~this.maskLong),this.first=this.bitmask<=30?_(this.netLong+1):this.base,this.last=this.bitmask<=30?_(this.netLong+this.size-2):_(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?_(this.netLong+this.size-1):void 0}return l.prototype.contains=function(e){return typeof e=="string"&&(e.indexOf("/")>0||e.split(".").length!==4)&&(e=new l(e)),e instanceof l?this.contains(e.base)&&this.contains(e.broadcast||e.last):(v(e)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},l.prototype.next=function(e){return e==null&&(e=1),new l(_(this.netLong+this.size*e),this.mask)},l.prototype.forEach=function(e){var u,a,t;for(t=v(this.first),a=v(this.last),u=0;t<=a;)e(_(t),t,u),u++,t++},l.prototype.toString=function(){return this.base+"/"+this.bitmask},l}(),U=v,z=_,A=k}).call(Z);const H=k=>k.includes(".")&&k.substring(0,2).toUpperCase()==="0B"?w(k,10,2,"0b"):k,w=(k,s=10,p=10,d="")=>k.split(".").map(m=>(d&&m.length>d.length&&m.substring(0,d.length).toUpperCase()===d.toUpperCase()&&(m=m.substring(d.length)),m=m.replace(/\b(0+)/gi,"")||"0",s===p?`${m}`:`${st(m,p,s).padStart(s===2?8:s===8?4:2,"0").toUpperCase()}`)).join("."),rt=k=>{if(isNaN(k)||k>4294967294||k<1)throw new Error("Available Size Invalid");let s=parseInt(`${Math.log(k)/Math.log(2)}`)+1;return Math.pow(2,s)-k<2&&(s+=1),32-s};class T{constructor(s="192.168.0.1",p="24"){L(this,"netmask");L(this,"ip","");!`${p}`.includes(".")&&parseInt(`${p}`,10)>32&&(p=z(parseInt(`${p}`,10))),s=H(s),p=H(p),this.netmask=new A(`${s}/${p}`),this.ip=`${z(U(s))}`}available(){return Math.max(this.netmask.size-2,0)}size(){return this.netmask.size}base(){return this.netmask.base}first(){return this.netmask.first}last(){return this.netmask.last}broadcast(){return this.netmask.broadcast||"-"}ipInfo(){return{ip:this.ip,long:`${U(this.ip)}`,ip2:w(this.ip,2),ip8:w(this.ip,8),ip16:w(this.ip,16)}}maskInfo(){const s=`${z(this.netmask.maskLong)}`;return{bit:`${this.netmask.bitmask}`,long:`${this.netmask.maskLong}`,mask:s,mask2:w(s,2),mask8:w(s,8),mask16:w(s,16),opposite:`${this.netmask.hostmask}`}}}const ut={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr"}},pt={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr 1fr"}},ft={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr"}},mt={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr"}},ct={style:{display:"grid","grid-template-columns":"8fr 8fr 10fr 10fr"}},bt=R({__name:"Ipv4",async setup(k){let s,p;const d=W(([s,p]=tt(()=>Y({input:"192.168.0.1",mask:"24",subnetOption:at("text")},{paste:t=>/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(t)})),s=await s,p(),s));let m=I(!1),h=I(!1),v=I(254),_=I(""),l=I(new T),e=I(!1);const u=et(()=>{const t=[];return l.value.netmask.forEach(n=>{t.push(n)}),ot.formObject(t)}),a=()=>{d.current.mask=`${rt(v.value)}`,h.value=!1};return lt(()=>({input:d.current.input,mask:d.current.mask}),({input:t,mask:n})=>{_.value="";try{l.value=new T(t,n),d.save()}catch(g){_.value=$error(g)}},{immediate:!0}),(t,n)=>{const g=b("HelpTip"),E=b("Input"),B=b("Icon"),C=b("Button"),V=b("Align"),F=b("Card"),D=b("Exception"),N=b("HeightResize"),O=b("Modal"),X=b("SerializeOutput"),G=b("ExtendPage"),K=b("InputNumber");return S(),it(nt,null,[i(V,{horizontal:"center",class:"ctool-page-option",bottom:"default"},{default:f(()=>[i(E,{size:"large",width:300,modelValue:o(d).current.input,"onUpdate:modelValue":n[1]||(n[1]=c=>o(d).current.input=c),label:t.$t("ipcalc_ip")},{suffix:f(()=>[i(g,{onClick:n[0]||(n[0]=c=>$(m)?m.value=!0:m=!0),icon:"info",text:t.$t("ipcalc_format")},null,8,["text"])]),_:1},8,["modelValue","label"]),i(E,{size:"large",width:280,modelValue:o(d).current.mask,"onUpdate:modelValue":n[4]||(n[4]=c=>o(d).current.mask=c),label:t.$t("ipcalc_mask")},{append:f(()=>[i(C,{onClick:n[2]||(n[2]=c=>$(h)?h.value=!0:h=!0)},{default:f(()=>[i(B,{hover:"",name:"setting",tooltip:t.$t("ipcalc_mask_set_title")},null,8,["tooltip"])]),_:1})]),suffix:f(()=>[i(g,{onClick:n[3]||(n[3]=c=>$(m)?m.value=!0:m=!0),icon:"info",text:t.$t("ipcalc_format")},null,8,["text"])]),_:1},8,["modelValue","label"]),i(g,{link:"https://www.npmjs.com/package/netmask"})]),_:1}),o(_)===""?(S(),j(V,{key:0,direction:"vertical"},{default:f(()=>[i(F,{title:t.$t("ipcalc_ip_info"),padding:"0"},{extra:f(()=>[x(P(o(d).current.input),1)]),default:f(()=>[y("div",ut,[i(r,{title:t.$t("ipcalc_ip_info_ip10"),value:o(l).ipInfo().ip},null,8,["title","value"]),i(r,{title:t.$t("ipcalc_ip_info_long"),value:o(l).ipInfo().long},null,8,["title","value"]),i(r,{title:t.$t("ipcalc_ip_info_ip8"),value:o(l).ipInfo().ip8},null,8,["title","value"]),i(r,{title:t.$t("ipcalc_ip_info_ip16"),value:o(l).ipInfo().ip16},null,8,["title","value"]),i(r,{title:t.$t("ipcalc_ip_info_ip2"),value:o(l).ipInfo().ip2,style:{"grid-column-start":"2","grid-column-end":"4"}},null,8,["title","value"])])]),_:1},8,["title"]),i(F,{title:t.$t("ipcalc_mask_info"),padding:"0"},{extra:f(()=>[x(P(o(d).current.mask),1)]),default:f(()=>[y("div",pt,[i(r,{title:t.$t("ipcalc_mask"),value:o(l).maskInfo().bit},null,8,["title","value"]),i(r,{title:t.$t("ipcalc_mask_info_mask"),value:o(l).maskInfo().mask},null,8,["title","value"]),i(r,{title:t.$t("ipcalc_mask_info_long"),value:o(l).maskInfo().long},null,8,["title","value"]),i(r,{title:t.$t("ipcalc_mask_info_opposite"),value:o(l).maskInfo().opposite},null,8,["title","value"]),i(r,{title:t.$t("ipcalc_mask_info_mask8"),value:o(l).maskInfo().mask8},null,8,["title","value"]),i(r,{title:t.$t("ipcalc_mask_info_mask16"),value:o(l).maskInfo().mask16},null,8,["title","value"]),i(r,{title:t.$t("ipcalc_mask_info_mask2"),value:o(l).maskInfo().mask2,style:{"grid-column-start":"3","grid-column-end":"5"}},null,8,["title","value"])])]),_:1},8,["title"]),i(F,{title:t.$t("ipcalc_network_info"),padding:"0"},{extra:f(()=>[i(C,{type:"primary",size:"small",text:t.$t("ipcalc_subnet"),onClick:n[5]||(n[5]=c=>$(e)?e.value=!0:e=!0)},null,8,["text"])]),default:f(()=>[y("div",ft,[i(r,{title:t.$t("ipcalc_network_info_available"),value:o(l).available()},null,8,["title","value"]),i(r,{title:t.$t("ipcalc_network_info_size"),value:o(l).size()},null,8,["title","value"]),i(r,{title:t.$t("ipcalc_network_info_base"),value:o(l).base()},null,8,["title","value"]),i(r,{title:t.$t("ipcalc_network_info_first"),value:o(l).first()},null,8,["title","value"]),i(r,{title:t.$t("ipcalc_network_info_last"),value:o(l).last()},null,8,["title","value"]),i(r,{title:t.$t("ipcalc_network_info_broadcast"),value:o(l).broadcast()},null,8,["title","value"])])]),_:1},8,["title"])]),_:1})):M("",!0),o(_)!==""?(S(),j(N,{key:1,append:[".ctool-page-option"]},{default:f(()=>[i(D,{content:o(_)},null,8,["content"])]),_:1},8,["append"])):M("",!0),i(O,{title:t.$t("ipcalc_format"),modelValue:o(m),"onUpdate:modelValue":n[6]||(n[6]=c=>$(m)?m.value=c:m=c),width:"98%","footer-type":"normal"},{default:f(()=>[i(V,{direction:"vertical"},{default:f(()=>[i(F,{title:t.$t("ipcalc_ip"),padding:"0"},{default:f(()=>[y("div",mt,[i(r,{title:t.$t("ipcalc_ip_info_ip10"),value:"192.168.0.1"},null,8,["title"]),i(r,{title:t.$t("ipcalc_ip_info_long"),value:"3232235521"},null,8,["title"]),i(r,{title:t.$t("ipcalc_ip_info_ip8"),value:"0300.0250.0000.0001"},null,8,["title"]),i(r,{title:t.$t("ipcalc_ip_info_ip16"),value:"0xC0.0xA8.0x00.0x01"},null,8,["title"]),i(r,{title:t.$t("ipcalc_ip_info_ip2"),value:"0b11000000.0b10101000.0b00000000.0b00000001",style:{"grid-column-start":"2","grid-column-end":"4"}},null,8,["title"])])]),_:1},8,["title"]),i(F,{title:t.$t("ipcalc_mask"),padding:"0"},{default:f(()=>[y("div",ct,[i(r,{title:t.$t("ipcalc_mask"),value:"24"},null,8,["title"]),i(r,{title:t.$t("ipcalc_mask_info_long"),value:"4294967040"},null,8,["title"]),i(r,{title:t.$t("ipcalc_mask_info_mask16"),value:"0xFF.0xFF.0xFF.0x00"},null,8,["title"]),i(r,{title:t.$t("ipcalc_mask_info_mask8"),value:"0377.0377.0377.0000"},null,8,["title"]),i(r,{title:t.$t("ipcalc_mask_info_mask"),value:"255.255.255.0"},null,8,["title"]),i(r,{title:t.$t("ipcalc_mask_info_mask2"),value:"0b11111111.0b11111111.0b11111111.0b00000000",style:{"grid-column-start":"2","grid-column-end":"5"}},null,8,["title"])])]),_:1},8,["title"])]),_:1})]),_:1},8,["title","modelValue"]),i(G,{modelValue:o(e),"onUpdate:modelValue":n[11]||(n[11]=c=>$(e)?e.value=c:e=c)},{default:f(()=>[i(F,{title:`${o(d).current.input} ${t.$t("ipcalc_subnet")}`,padding:"0"},{extra:f(()=>[i(V,null,{default:f(()=>[i(E,{size:"small",width:200,modelValue:o(d).current.mask,"onUpdate:modelValue":n[10]||(n[10]=c=>o(d).current.mask=c),label:t.$t("ipcalc_mask")},{append:f(()=>[i(C,{onClick:n[8]||(n[8]=c=>$(h)?h.value=!0:h=!0)},{default:f(()=>[i(B,{hover:"",name:"setting",tooltip:t.$t("ipcalc_mask_set_title")},null,8,["tooltip"])]),_:1})]),suffix:f(()=>[i(g,{onClick:n[9]||(n[9]=c=>$(m)?m.value=!0:m=!0),icon:"info",text:t.$t("ipcalc_format")},null,8,["text"])]),_:1},8,["modelValue","label"])]),_:1})]),default:f(()=>[i(N,{reduce:35},{default:f(({height:c})=>[i(X,{disabledBorder:"",modelValue:o(d).current.subnetOption,"onUpdate:modelValue":n[7]||(n[7]=q=>o(d).current.subnetOption=q),allow:["json","xml","yaml","toml","php_array","properties","text"],content:u.value,height:c},null,8,["modelValue","content","height"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]),i(O,{title:t.$t("ipcalc_mask_set_title"),modelValue:o(h),"onUpdate:modelValue":n[13]||(n[13]=c=>$(h)?h.value=c:h=c),"footer-type":"long",onOk:a},{default:f(()=>[i(K,{size:"large",modelValue:o(v),"onUpdate:modelValue":n[12]||(n[12]=c=>$(v)?v.value=c:v=c),label:t.$t("ipcalc_network_info_available")},null,8,["modelValue","label"])]),_:1},8,["title","modelValue"])],64)}}});export{bt as default};
